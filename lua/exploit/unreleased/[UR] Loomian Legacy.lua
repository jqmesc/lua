-- Loomian Legacy

local main_module = loadstring(game:HttpGet('https://raw.githubusercontent.com/Sinscrips/source_scripts/main/Main%20Module.lua', true))()
local library = main_module['Library']
local esp = main_module['Esp']
local aimbot = main_module['Aimbot']
local uis = game:GetService('UserInputService')

local plr = game.Players.LocalPlayer
local char = plr.Character or plr.CharacterAdded:Wait()

-- [Data Steal]
for i,v in pairs(getgc(true)) do
    if type(v) == 'table' then
        if rawget(v, 'MasterControl') then
            client = v
        end
    end
end

local master_control = rawget(client, 'MasterControl')
local npc = rawget(client, 'NPCChat')
local weather = rawget(client, 'Weather')
local clouds = rawget(client, 'Clouds')

-- [Functions]
function Jump()
    master_control:ForceJump()
end
function message(v1)
    npc:say(v1)
end
function clear()
    npc:clear()
end

local movement_frame = library:AddFrame({name='Movement'})
local weather_frame = library:AddFrame({name='Weather'})

-- [MOVEMENT FRAME]
--[jump]
local old_set_jump = rawget(master_control, 'SetJumpEnabled')
movement_frame:AddToggle('Enable Jump', function(v1)
    if v1 then
        master_control.SetJumpEnabled = function() return end
    else
        master_control.SetJumpEnabled = old_set_jump
    end
    master_control:SetJumpEnabled(v1)
end)
--[walkspeed]
local walk_speed
movement_frame:AddBox('Walk Speed', function(v1)
    local num = tonumber(v1)
    walk_speed = num
    if num then
        char.Humanoid.WalkSpeed = num
    end
end)
--[jp]
local jump_power
movement_frame:AddBox('Jump Power', function(v1)
    local num = tonumber(v1) or 50
    jump_power = num
    char.Humanoid.JumpPower = num
end)

-- [WEATHER FRAME]
--[clouds]
weather_frame:AddButton('Toggle Clouds', function()
    if clouds['enabled'] then
        clouds:disable()
    else
        clouds:enable()
    end
end)
--[wind]
weather_frame:AddButton('Toggle Wind', function()
    weather:ToggleWind()
end)
--[rain]
weather_frame:AddButton('Toggle Rain', function()
    weather:ToggleRain()
end)
--[meteors]
-- weather_frame:AddButton('Toggle Meteors', function()
--     weather:ToggleMeteors()
-- end)
--[clear]
weather_frame:AddButton('Clear', function()
    weather:Clear()
end)








-- [Metatables]
local m = getrawmetatable(game)
setreadonly(m, false)

local old_namecall = m.__namecall
local old_newindex = m.__newindex
local old_index = m.__index

--[index]
m.__index = function(t, k)
    if tostring(t) == 'Humanoid' and k == 'WalkSpeed' then
        return 16
    end
    return old_index(t, k)
end
--[newindex]
m.__newindex = function(t, k, v)
    if tostring(t) == 'Humanoid' then
        if k == 'WalkSpeed' and walk_speed then
            v = walk_speed
        elseif k == 'JumpPower' and jump_power then
            v = jump_power
        end
    end
    return old_newindex(t, k, v)
end

clear()
message('Script loaded. Credits to Sinsane [jaames#9911]')