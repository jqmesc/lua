-- game https://www.roblox.com/games/4456070441/Mayday

local main_module = loadstring(game:HttpGet('https://raw.githubusercontent.com/Sinscrips/source_scripts/main/main_module_v2.lua', true))()
local library = main_module['Library']
local esp = main_module['Esp']
local aimbot = main_module['Aimbot']
local message = main_module['Message']
local uis = game:GetService('UserInputService')
local cls = game:GetService('CollectionService')

local _plr = game.Players.LocalPlayer

local _client = { }
local _shared = { 
    AimFolder = { };
    EspFolder = { };
}
local _settings = { 
    gun_mods = { 
        Ammo = false;
        Spread = false;
        Recoil = false;
        --Bullets = false;
        Delay = false;
        Reload = false;
        Range = false;
        Damage = false;
    };
    infjump = false;
}


for i,v in pairs(getscripts()) do
    if v.Name == 'LogService' then
        _client.Log = require(v)
    end
end
-- // Functions // --
function _shared:GetEnemyTeam()
    local _enemies = { }
    for i,v in pairs(game.Players:GetChildren()) do
        if v ~= _plr and (v.GameTeam.Value == 'Neutral' or v.GameTeam.Value ~= _plr.GameTeam.Value) then
            table.insert(_enemies, v)
        end
    end
    return _enemies
end
function _shared:ClearFolders()
    for i,v in pairs(self.AimFolder) do
        table.remove(self.AimFolder, i)
    end
    for i,v in pairs(self.EspFolder) do
        self.EspFolder[i] = nil
    end
    --print('folders cleared')
end
function _shared:UpdatedFolders()
    _shared:ClearFolders()
    for i,v in pairs(_shared:GetEnemyTeam()) do
        if v.Character then
            _shared.EspFolder[v.Character] = v.Character
            table.insert(_shared.AimFolder, v.Character)
            --print('enemy player ' .. v.Name .. ' inserted')
        end
    end
    --warn('folders updated')
end
function _client:EditCurrentWeapon(v1, v2) 
    local _gunData = _client.Log.GetData(_client.Log.CurrentWeapon)
    if not _gunData['info'] then
        local _data = { }
        for i,v in pairs(_gunData) do
            _data[i]=v
        end
        _gunData['info'] = _data
    end
    local _gunInfo = _gunData['info']

    _gunData[v1] = (v2 ~= nil and v2 ~= 'default') and v2 or _gunInfo[v1]
end
function _client:onSpawn()
    repeat wait() until _client.Log.CurrentWeapon
    if _settings.gun_mods['Recoil'] then
        _client:EditCurrentWeapon('Recoil', 0)
    end
    if _settings.gun_mods['Spread'] then
        _client:EditCurrentWeapon('Accuracy', 0)
    end
    if _settings.gun_mods['Delay'] then
        _client:EditCurrentWeapon('Rate', 0.01)
    end
    if _settings.gun_mods['Reload'] then
        _client:EditCurrentWeapon('ReloadSpeed', 0)
    end
end

-- // GUI Frame 1 // --
local Frame1 = library:AddFrame({name='Gun Hax'})

Frame1:AddToggle('Inf Ammo', function(v1)
    _settings.gun_mods.Ammo = v1
    _client:EditCurrentWeapon('Ammo', v1 and math.huge)
    _client:EditCurrentWeapon('MaxAmmo', v1 and math.huge)
end)
Frame1:AddToggle('Inf Range', function(v1)
    _settings.gun_mods.Range = v1
    _client:EditCurrentWeapon('Range', v1 and 9e9)
end)
Frame1:AddToggle('Disable Recoil', function(v1)
    _settings.gun_mods.Recoil = v1
    _client:EditCurrentWeapon('Recoil', v1 and 0)
end)
Frame1:AddToggle('Disable Spread', function(v1)
    _settings.gun_mods.Spread = v1
    _client:EditCurrentWeapon('Accuracy', v1 and 0)
end)
Frame1:AddToggle('Disable Cooldown', function(v1)
    _settings.gun_mods.Delay = v1
    _client:EditCurrentWeapon('Rate', v1 and 0.01)
end)
Frame1:AddToggle('Insta Reload', function(v1)
    _settings.gun_mods.Reload = v1
    _client:EditCurrentWeapon('ReloadSpeed', v1 and 0)
end)

-- // GUI Frame 2 // --
local Frame2 = library:AddFrame({name='Plr Hax'})

local _esp
Frame2:AddToggle('Esp', function(v1)
    if v1 then
        _esp = esp.new({folder=_shared.EspFolder,color=Color3.fromRGB(255,0,0)})
        _shared:UpdatedFolders()
    else
        _esp:Remove()
    end
end)

local _aimbot
Frame2:AddToggle('Aimbot', function(v1)
    if v1 then
        _aimbot = aimbot.new({folder=_shared.AimFolder, smoothness=1})
        _shared:UpdatedFolders()
    else
        _aimbot:Remove()
    end
end)

Frame2:AddToggle('Inf Jump', function(v1)
    _settings.infjump = v1
end)

-- // Keybinds // --
uis.InputBegan:connect(function(key)
    if key.KeyCode == Enum.KeyCode.RightShift then
        library:Toggle()
    end
end)

-- // Hooks // --
local _hooks = { }

_hooks.Jump = hookfunc(_client.Log.Jump, function()
    if _settings.infjump then
        local _char = game.Players.LocalPlayer.Character
        local _velocity = _char.PrimaryPart.Velocity
        _char.PrimaryPart.Velocity = Vector3.new(_velocity.X, _client.Log.CurrentCrouch and 42.5 or 32.5, _velocity.Z)
        return
    end
    return _hooks.Jump()
end)

-- // Player Spawn // --
game.Workspace.Characters.ChildAdded:connect(function(c)
    repeat wait() until c:FindFirstChildOfClass('Humanoid')
    if c ~= _plr.Character then
        _shared:UpdatedFolders()
    else
        _client:onSpawn()
    end
end)

-- // Flaire // --
_client.Log.Bindable:Fire('Dilate', -25)
message.new({msg='Script Loaded, Credits to Sinsane (jaames#9911)'})