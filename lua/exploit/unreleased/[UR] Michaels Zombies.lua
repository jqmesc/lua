-- game https://www.roblox.com/games/8054462345/Michaels-Zombies

local main_module = loadstring(game:HttpGet('https://raw.githubusercontent.com/Sinscrips/source_scripts/main/main_module_v2.lua', true))()
local Console = main_module['Console']
local esp = main_module['Esp']
local aimbot = main_module['Aimbot']
local uis = game:GetService('UserInputService')
local cls = game:GetService('CollectionService')

local _plr = game.Players.LocalPlayer

warn('waiting for client')
repeat wait() until _plr.Character:FindFirstChild('Framework')
warn('client loaded')

local _client = {
    framework = getsenv(_plr.Character.Framework:WaitForChild('WeaponHandlerClient'));
    character = _plr.Character;
    stats = _plr.character.CharStats;
}
local _shared = { 
    aimfolder = { };
    espfolder = { };
    game_modules = game.ReplicatedStorage.Game.Modules;
    framework_modules = game.ReplicatedStorage.Framework.Modules;
    zombies = game.Workspace.Ignore:WaitForChild('Zombies');
}

local _settings = { 
    Walls = true;
}

-- // Functions // --
function _client:GetPrimary()
    return self.stats.GunInventory:FindFirstChild('Gun1').Value
end
function _client:GetSecondary()
    return self.stats.GunInventory:FindFirstChild('Gun2').Value
    --return require(_shared.game_modules.GunManagerModule).getGunFromInventory(_plr.Character, 2).Value
end
function _client:GetEquipped()
    return  self.stats.GunInventory:FindFirstChild('Gun'..tostring(self.stats.EquippedGunIndex.Value)).Value
end
function _shared:GetWeaponData(v1)
    return require(require(self.game_modules.GunManagerModule).getGunSettings(v1))
end
function _client:EditCurrentWeapon(v1, v2)
    local _weaponData = getupvalue(_client.framework.loadGun, 8)

    if tostring(v2):lower() == 'default' then
        _weaponData[v1] = _shared:GetWeaponData(_client:GetEquipped())[v1] -- current weapon
        return
    end
    _weaponData[v1] = v2
end

-- // GUI Console // --
local _console = Console:Create({name='Zombie Fucker',capturekey=Enum.KeyCode.LeftAlt})

_console:AddCommand('cmds', function()
    local _index = ''
    for i,v in pairs(_console:GetCommandList()) do
        _index = _index..v..', '
    end
    return string.sub(_index, 1, #_index-2), Color3.fromRGB(0, 0, 255)
end)
_console:AddCommand('aim fov', function(v1)
    _client:EditCurrentWeapon('AIM_FOV', tonumber(v1) or 'default')
    return (v1=='false' or v1=='off') and 'Aim FOV set to '..tostring(tonumber(v1) or 'default'), Color3.fromRGB(0, 255, 0)
end)
_console:AddCommand('spread', function(v1)
    _client:EditCurrentWeapon('SPREAD', (v1=='false' or v1=='off') and {DEFAULT=0,MIN=0,MAX=0,CROUCH_REDUCTION=0,AIM_REDUCTION=0,WALK_ADDITION=0} or 'default')
    return (v1=='false' or v1=='off') and 'Spread set to false' or 'Spread set to true', Color3.fromRGB(0, 255, 0)
end)
_console:AddCommand('recoil', function(v1)
    _client:EditCurrentWeapon('CAMERA_RECOIL', (v1=='false' or v1=='off') and {IDLE=function() return Vector3.new(0,0,0) end,CROUCH=function() return Vector3.new(0,0,0) end,AIM=function() return Vector3.new(0,0,0) end} or 'default')
    return (v1=='false' or v1=='off') and 'Recoil set to false' or 'Recoil set to true', Color3.fromRGB(0, 255, 0)
end)
_console:AddCommand('firemode', function(v1)
    _client:EditCurrentWeapon('FIRE_TYPE', v1:lower():find('auto') and 'AUTO' or v1:lower():find('semi') and 'SEMI' or v1:lower():find('BURST') or 'default')
    return 'Fire mode set to '..v1, Color3.fromRGB(0, 255, 0)
end)


local _esp
_console:AddCommand('esp', function(v1)
    if v1 == 'true' or v1 == 'on' then
        _esp = esp.new({folder=_shared.espfolder})
        for i,v in pairs(_shared.zombies:GetChildren()) do
            if not _shared.espfolder[v] then _shared.espfolder[v]=v end
        end
        return 'ESP enabled', Color3.fromRGB(0, 255, 0)
    elseif v1 == 'false' or v1 == 'off' then
        _esp:Remove()
        return 'ESP disabled', Color3.fromRGB(255, 0, 0)
    end
end)
local _aimbot
_console:AddCommand('aimbot', function(v1)
    if v1 == 'true' or v1 == 'on' then
        _aimbot = aimbot.new({folder=_shared.aimfolder})
        for i,v in pairs(_shared.zombies:GetChildren()) do
            if not table.find(_shared.aimfolder, v) then table.insert(_shared.aimfolder, v) end
        end
        return 'Aimbot enabled', Color3.fromRGB(0, 255, 0)
    elseif v1 == 'false' or v1 == 'off' then
        _aimbot:Remove()
        return 'Aimbot disabled', Color3.fromRGB(255, 0, 0)
    end
end)

local _index = ''
for i,v in pairs(_console:GetCommandList()) do
    _index = _index..v..', '
end
_console:Output(string.sub(_index, 1, #_index-2), Color3.fromRGB(0, 0, 255))

-- // Zombie added // --
_shared.zombies.ChildAdded:connect(function(z)
    wait(0.05)
    _shared.espfolder[z]=z
    table.insert(_shared.aimfolder, z)
end)