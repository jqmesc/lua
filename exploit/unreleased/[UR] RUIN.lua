-- game https://www.roblox.com/games/9731160348/RUIN-Alpha

local main_module = loadstring(game:HttpGet('https://raw.githubusercontent.com/Sinscrips/source_scripts/main/main_module_v2.lua', true))()
local library = main_module['Library']
local esp = main_module['Esp']
local aimbot = main_module['Aimbot']
local uis = game:GetService('UserInputService')
local cls = game:GetService('CollectionService')

local  _plr = game.Players.LocalPlayer
local _repFiles = game.ReplicatedStorage.RepFiles

local _settings = { 
    DisableFloor = false;
    DashMultiplier = 1;
}

-- // Main Functions // --
getgenv()._backdoor = { }

function _backdoor:GetMap()
    return require(_repFiles.MapManagerClient).CurrentMap
    -- for i,v in pairs(game.Workspace:GetChildren()) do
    --     if v:FindFirstChild('MapRootPart') then
    --         return v
    --     end
    -- end
end
function _backdoor:SetState(v1)
    if v1 == 'noclip' or v1 == 'clip' and _backdoor:GetMap() then
        for i,v in pairs(_backdoor:GetMap().LevelDesign.Bounds:GetDescendants()) do
            if v:IsA('BasePart') then
                v.CanCollide = v1=='noclip' and false or v1=='clip' and true
            end
        end
    end
end
function _backdoor:DisableKillFloor(v1)
    _settings.DisableKillFloor = v1
    if v1 and _backdoor:GetMap() then
        local _currentMap = _backdoor:GetMap()
        for i,v in pairs(_currentMap.KillBounds:GetChildren()) do
            spawn(function()
                local _oldParent = v.Parent
                v.Parent = nil
                repeat wait() until not _settings.DisableKillFloor or _backdoor:GetMap() ~= _currentMap
                if _backdoor:GetMap() == _currentMap then
                    v.Parent = _oldParent
                end
            end)
        end
        return
    end
end

-- // Frames // --
local Frame1 = library:AddFrame({name='Hax'})

Frame1:AddToggle('Noclip', function(v1)
    _backdoor:SetState(v1 and 'noclip' or 'clip')
end)
Frame1:AddToggle('Disable Kill Floor', function(v1)
    _backdoor:DisableKillFloor(v1)
end)
Frame1:AddBox('Set Dash Multiplier', function(v1)
    _settings.DashMultiplier = tonumber(v1) or 1
end)

-- // Hooks // --
local _hooks = { }
_hooks.Dash = hookfunc(require(game.ReplicatedStorage.RepFiles.SkillData.MovementSkills.BasicDash).TeleportDash, function(...) -- set dash multiplier
    local args = {...}
    args[3] = args[3]*_settings.DashMultiplier
    return _hooks.Dash(unpack(args))
end)

-- // Property Spy // --
