-- game 

--[[

  mmmm   mmmmm   mm   m   mmmm     mm    mm   m  mmmmmm
 #"   "    #     #"m  #  #"   "    ##    #"m  #  #     
 "#mmm     #     # #m #  "#mmm    #  #   # #m #  #mmmmm
     "#    #     #  # #      "#   #mm#   #  # #  #     
 "mmm#"  mm#mm   #   ##  "mmm#"  #    #  #   ##  #mmmmm

--]]

-- // Library // --
local main_module = loadstring(game:HttpGet('https://raw.githubusercontent.com/Sinscrips/source_scripts/main/main_module_v2.lua', true))()
local library = main_module['Library']
local functions = main_module['Functions']
local esp = main_module['Esp']
local aimbot = main_module['Aimbot']
local message = main_module['Message']
local Keybind = main_module['Keybind']
local uis = game:GetService('UserInputService')
local cls = game:GetService('CollectionService')

-- // Variables // --
local _plr = game.Players.LocalPlayer;

getgenv()._client = { };

getgenv()._shared = {
    AimFolder = { };
    EspFolder = { };
};

getgenv()._assets = { };

local _settings = { 
    Weapon = {

    };
    Game = {

    };
    Player = {
        
    };
};

-- // Functions // --
function _shared:ClearFolders()
    for i,v in pairs(self.AimFolder) do
        table.remove(self.AimFolder, i)
    end
    for i,v in pairs(self.EspFolder) do
        self.EspFolder[i] = nil
    end
    --print('folders cleared')
end
function _shared:UpdatedFolders()
    _shared:ClearFolders()
    for i,v in pairs(game.Players:GetChildren()) do
        if v ~= _plr then
            self.EspFolder[v.Character] = v.Character;
            table.insert(self.AimFolder, v.Character);
        end
    end
    --warn('folders updated')
end

-- // GUI Frame 1 // --
local Frame1 = library:AddFrame({name='Gun Hax'})

-- // GUI Frame 2 // --
local Frame2 = library:AddFrame({name='Plr Hax'})

local _aimbot
Frame2:AddToggle('Aimbot', function(v1)
    if v1 then
        _aimbot = aimbot.new({folder=_shared.AimFolder,smoothness=1})
        _shared:UpdatedFolders()
    else
        _aimbot:Remove()
    end
end)
local _esp
Frame2:AddToggle('Esp', function(v1)
    if v1 then
        _esp = esp.new({folder=_shared.EspFolder,color=Color3.fromRGB(255,0,0)})
        _shared:UpdatedFolders()
    else
        _esp:Remove()
    end
end)

-- // GUI Frame 3 // --
local Frame3 = library:AddFrame({name='Env Hax'})

Frame3:AddBox('Gravity',function(v1)
    game.Workspace.Gravity = tonumber(v1) or 196.2
end)

-- // Events // --
_plr.CharacterAdded:Connect(function()
    local _char=plr.Character or _plr.CharacterAdded:Wait()
    local _hum=_char:WaitForChild('Humanoid')
    _hum.WalkSpeed=_settings.Player.WalkSpeed
end)

-- // Keybinds // --
Keybind:NewBind(Enum.KeyCode.RightShift, function() -- Library Keybind
    library:Toggle();
end)

-- // Metatables // --
local m=getrawmetatable(game)
local __index=m.__index
local __namecall=m.__namecall
local __newindex=m.__newindex
local __call=m.__call

setreadonly(m, false)