-- game https://www.roblox.com/games/6172932937/Energy-Assault

local main_module = loadstring(game:HttpGet('https://raw.githubusercontent.com/Sinscrips/source_scripts/main/main_module_v2.lua', true))()
local library = main_module['Library']
local esp = main_module['Esp']
local aimbot = main_module['Aimbot']
local uis = game:GetService('UserInputService')
local cls = game:GetService('CollectionService')

local _plr = game.Players.LocalPlayer

local _client = { 
    framework = _plr.hasdeployed.Value and getsenv(_plr.PlayerGui:FindFirstChild('gunmIs'));
    --key =  _client.framework and getupvalue(_client.framework.changestance, 1);
}
local _shared = { 
    AimFolder = { };
    EspFolder = { };
}
local _settings = { 
    gun_mods = {
        recoil = false;
        spread = false;
        firedelay = false;
        infammo = false;
        instaequip = false;
        firemode = 'Default';
    };
}

-- // Functions // --
function _client:EditCurrentWeapons(v1, v2) -- edit weapon stats
    if type(v2) == 'string' and v2:lower() == 'default' then
        self.framework.primaryinfo[v1] = self.framework.primary:FindFirstChild(v1).Value
        self.framework.secondaryinfo[v1] = self.framework.secondary:FindFirstChild(v1).Value
        return
    end
    self.framework.primaryinfo[v1] = v2
    self.framework.secondaryinfo[v1] = v2
end

function _client:OverWriteGameFuncs() -- update the client
    if _plr.Character and _plr.Character.Parent.Name ~= 'Ragdolls' then
        -- player is alive

        --- Gun Mods ---
        if _settings.gun_mods['recoil'] then
            _client:EditCurrentWeapons('recoil', Vector3.new())
        end
        if settings.gun_mods['spread'] then
            _client:EditCurrentWeapons('realhipspread', 0)
            _client:EditCurrentWeapons('hipspread', 0)
            _client:EditCurrentWeapons('aimspread', 0)
        end
        if setting.gun_mods['firedelay'] then
            _client:EditCurrentWeapons('firerate', 0.001)
        end

    end
    -- player is not alive
    warn('game functions overwritten')
end

-- // GUI Frame 1 // --
local Frame1 = library:AddFrame({name='Weapon Modifications'})

Frame1:AddToggle('Disable Recoil', function(v1)
    _settings.gun_mods.recoil = v1
    _client:EditCurrentWeapons('recoil', v1 and Vector3.new() or 'Default')
end)

Frame1:AddToggle('Disable Spread', function(v1)
    _settings.gun_mods.spread = v1
    _client:EditCurrentWeapons('realhipspread', v1 and 0 or 'Default')
    _client:EditCurrentWeapons('hipspread', v1 and 0 or 'Default')
    _client:EditCurrentWeapons('aimspread', v1 and 0 or 'Default')
end)
Frame1:AddToggle('Disable Fire Delay', function(v1)
    _settings.gun_mods.firedelay = v1
    _client:EditCurrentWeapons('firerate', v1 and 0.001 or 'Default')
end)
Frame1:AddToggle('Inf Ammo', function(v1)
    _settings.gun_mods.infammo = v1
    _client:EditCurrentWeapons('magcapacity', v1 and math.huge or 'Default')
    _client:EditCurrentWeapons('ammoinmag', v1 and math.huge or 'Default')
end)
Frame1:AddToggle('Insta Equip', function(v1)

end)
Frame1:AddSwitch('Fire Mode', {'Default', 'Auto', 'Burst', 'Semi'},function(v1)
    _settings.gun_mods.firemode = v1
    _client:EditCurrentWeapons('currentfiremode', v1:lower())
end)

-- // GUI Frame 2 // --
local Frame2 = library:AddFrame({name='Player Modifications'})

-- // Deploy spy // --
_plr.CharacterAdded:connect(function(_char)
    _client.framework = getsenv(_plr.PlayerGui:WaitForChild('gunmIs'))
    -- character deployed

    _client:OverWriteGameFuncs()
    repeat wait() until not _plr.hasdeployed.Value or not _client.framework.alive
    -- character died
    _client:OverWriteGameFuncs()

end)
